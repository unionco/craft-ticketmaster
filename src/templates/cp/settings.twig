{# @var craft \craft\web\twig\variables\CraftVariable #}
{#
/**
 * Ticketmaster plugin for Craft CMS 3.x
 *
 * Ticketmaster index.twig
 *
 * @author    Union
 * @copyright Copyright (c) 2019 Union
 * @link      https://github.com/unionco
 * @package   Ticketmaster
 * @since     1.0.0
 */
#}

{% extends "_layouts/cp" %}
{% import "_includes/forms" as forms %}

{# {% do view.registerAssetBundle("unionco\\ticketmaster\\assetbundles\\ticketmaster\\TicketmasterAsset") %} #}

{# The title of this CP section #}
{% set title = "Ticketmaster" %}

{% set settings = {
    'General Settings': {
        sections: {
            icon: '@app/icons/newspaper.svg',
            label: 'Sections'
        },
        layouts: {
            icon: '@app/icons/field.svg',
            label: 'Field Layouts'
        }
    },
    'Plugin Settings': {
        plugin: {
            url: 'settings/plugins/ticketmaster',
            icon: '@unionco/ticketmaster/icon.svg',
            label: 'Plugin'
        }
    }
} %}

{# The content of the CP Section#}
{% set content %}
    {# {{ dump(craft.cp.settings(80))}} #}
    {% for category, items in settings %}
        <h2>{{ category }}</h2>

        <ul class="icons">
            {% for handle, item in items %}
                <li>
                    <a href="{% if item.url is defined %}{{ url(item.url) }}{% else %}{{ url('ticketmaster/settings/'~handle) }}{% endif %}">
                        <div class="icon">
                            {{ svg(item.icon, sanitize=true, namespace=true) }}
                        </div>
                        {{ item.label }}
                    </a>
                </li>
            {% endfor %}
        </ul>

        {% if not loop.last %}
            <hr>
        {% endif %}
    {% endfor %}
{% endset %}